// Code generated by ent, DO NOT EDIT.

package intercept

import (
	"context"
	"fmt"

	"entgo.io/ent/dialect/sql"
	"github.com/seedreap/seedreap/internal/ent/generated"
	"github.com/seedreap/seedreap/internal/ent/generated/app"
	"github.com/seedreap/seedreap/internal/ent/generated/appjob"
	"github.com/seedreap/seedreap/internal/ent/generated/downloadclient"
	"github.com/seedreap/seedreap/internal/ent/generated/downloadfile"
	"github.com/seedreap/seedreap/internal/ent/generated/downloadjob"
	"github.com/seedreap/seedreap/internal/ent/generated/event"
	"github.com/seedreap/seedreap/internal/ent/generated/movejob"
	"github.com/seedreap/seedreap/internal/ent/generated/predicate"
	"github.com/seedreap/seedreap/internal/ent/generated/syncfile"
	"github.com/seedreap/seedreap/internal/ent/generated/syncjob"
	"github.com/seedreap/seedreap/internal/ent/generated/trackeddownload"
)

// The Query interface represents an operation that queries a graph.
// By using this interface, users can write generic code that manipulates
// query builders of different types.
type Query interface {
	// Type returns the string representation of the query type.
	Type() string
	// Limit the number of records to be returned by this query.
	Limit(int)
	// Offset to start from.
	Offset(int)
	// Unique configures the query builder to filter duplicate records.
	Unique(bool)
	// Order specifies how the records should be ordered.
	Order(...func(*sql.Selector))
	// WhereP appends storage-level predicates to the query builder. Using this method, users
	// can use type-assertion to append predicates that do not depend on any generated package.
	WhereP(...func(*sql.Selector))
}

// The Func type is an adapter that allows ordinary functions to be used as interceptors.
// Unlike traversal functions, interceptors are skipped during graph traversals. Note that the
// implementation of Func is different from the one defined in entgo.io/ent.InterceptFunc.
type Func func(context.Context, Query) error

// Intercept calls f(ctx, q) and then applied the next Querier.
func (f Func) Intercept(next generated.Querier) generated.Querier {
	return generated.QuerierFunc(func(ctx context.Context, q generated.Query) (generated.Value, error) {
		query, err := NewQuery(q)
		if err != nil {
			return nil, err
		}
		if err := f(ctx, query); err != nil {
			return nil, err
		}
		return next.Query(ctx, q)
	})
}

// The TraverseFunc type is an adapter to allow the use of ordinary function as Traverser.
// If f is a function with the appropriate signature, TraverseFunc(f) is a Traverser that calls f.
type TraverseFunc func(context.Context, Query) error

// Intercept is a dummy implementation of Intercept that returns the next Querier in the pipeline.
func (f TraverseFunc) Intercept(next generated.Querier) generated.Querier {
	return next
}

// Traverse calls f(ctx, q).
func (f TraverseFunc) Traverse(ctx context.Context, q generated.Query) error {
	query, err := NewQuery(q)
	if err != nil {
		return err
	}
	return f(ctx, query)
}

// The AppFunc type is an adapter to allow the use of ordinary function as a Querier.
type AppFunc func(context.Context, *generated.AppQuery) (generated.Value, error)

// Query calls f(ctx, q).
func (f AppFunc) Query(ctx context.Context, q generated.Query) (generated.Value, error) {
	if q, ok := q.(*generated.AppQuery); ok {
		return f(ctx, q)
	}
	return nil, fmt.Errorf("unexpected query type %T. expect *generated.AppQuery", q)
}

// The TraverseApp type is an adapter to allow the use of ordinary function as Traverser.
type TraverseApp func(context.Context, *generated.AppQuery) error

// Intercept is a dummy implementation of Intercept that returns the next Querier in the pipeline.
func (f TraverseApp) Intercept(next generated.Querier) generated.Querier {
	return next
}

// Traverse calls f(ctx, q).
func (f TraverseApp) Traverse(ctx context.Context, q generated.Query) error {
	if q, ok := q.(*generated.AppQuery); ok {
		return f(ctx, q)
	}
	return fmt.Errorf("unexpected query type %T. expect *generated.AppQuery", q)
}

// The AppJobFunc type is an adapter to allow the use of ordinary function as a Querier.
type AppJobFunc func(context.Context, *generated.AppJobQuery) (generated.Value, error)

// Query calls f(ctx, q).
func (f AppJobFunc) Query(ctx context.Context, q generated.Query) (generated.Value, error) {
	if q, ok := q.(*generated.AppJobQuery); ok {
		return f(ctx, q)
	}
	return nil, fmt.Errorf("unexpected query type %T. expect *generated.AppJobQuery", q)
}

// The TraverseAppJob type is an adapter to allow the use of ordinary function as Traverser.
type TraverseAppJob func(context.Context, *generated.AppJobQuery) error

// Intercept is a dummy implementation of Intercept that returns the next Querier in the pipeline.
func (f TraverseAppJob) Intercept(next generated.Querier) generated.Querier {
	return next
}

// Traverse calls f(ctx, q).
func (f TraverseAppJob) Traverse(ctx context.Context, q generated.Query) error {
	if q, ok := q.(*generated.AppJobQuery); ok {
		return f(ctx, q)
	}
	return fmt.Errorf("unexpected query type %T. expect *generated.AppJobQuery", q)
}

// The DownloadClientFunc type is an adapter to allow the use of ordinary function as a Querier.
type DownloadClientFunc func(context.Context, *generated.DownloadClientQuery) (generated.Value, error)

// Query calls f(ctx, q).
func (f DownloadClientFunc) Query(ctx context.Context, q generated.Query) (generated.Value, error) {
	if q, ok := q.(*generated.DownloadClientQuery); ok {
		return f(ctx, q)
	}
	return nil, fmt.Errorf("unexpected query type %T. expect *generated.DownloadClientQuery", q)
}

// The TraverseDownloadClient type is an adapter to allow the use of ordinary function as Traverser.
type TraverseDownloadClient func(context.Context, *generated.DownloadClientQuery) error

// Intercept is a dummy implementation of Intercept that returns the next Querier in the pipeline.
func (f TraverseDownloadClient) Intercept(next generated.Querier) generated.Querier {
	return next
}

// Traverse calls f(ctx, q).
func (f TraverseDownloadClient) Traverse(ctx context.Context, q generated.Query) error {
	if q, ok := q.(*generated.DownloadClientQuery); ok {
		return f(ctx, q)
	}
	return fmt.Errorf("unexpected query type %T. expect *generated.DownloadClientQuery", q)
}

// The DownloadFileFunc type is an adapter to allow the use of ordinary function as a Querier.
type DownloadFileFunc func(context.Context, *generated.DownloadFileQuery) (generated.Value, error)

// Query calls f(ctx, q).
func (f DownloadFileFunc) Query(ctx context.Context, q generated.Query) (generated.Value, error) {
	if q, ok := q.(*generated.DownloadFileQuery); ok {
		return f(ctx, q)
	}
	return nil, fmt.Errorf("unexpected query type %T. expect *generated.DownloadFileQuery", q)
}

// The TraverseDownloadFile type is an adapter to allow the use of ordinary function as Traverser.
type TraverseDownloadFile func(context.Context, *generated.DownloadFileQuery) error

// Intercept is a dummy implementation of Intercept that returns the next Querier in the pipeline.
func (f TraverseDownloadFile) Intercept(next generated.Querier) generated.Querier {
	return next
}

// Traverse calls f(ctx, q).
func (f TraverseDownloadFile) Traverse(ctx context.Context, q generated.Query) error {
	if q, ok := q.(*generated.DownloadFileQuery); ok {
		return f(ctx, q)
	}
	return fmt.Errorf("unexpected query type %T. expect *generated.DownloadFileQuery", q)
}

// The DownloadJobFunc type is an adapter to allow the use of ordinary function as a Querier.
type DownloadJobFunc func(context.Context, *generated.DownloadJobQuery) (generated.Value, error)

// Query calls f(ctx, q).
func (f DownloadJobFunc) Query(ctx context.Context, q generated.Query) (generated.Value, error) {
	if q, ok := q.(*generated.DownloadJobQuery); ok {
		return f(ctx, q)
	}
	return nil, fmt.Errorf("unexpected query type %T. expect *generated.DownloadJobQuery", q)
}

// The TraverseDownloadJob type is an adapter to allow the use of ordinary function as Traverser.
type TraverseDownloadJob func(context.Context, *generated.DownloadJobQuery) error

// Intercept is a dummy implementation of Intercept that returns the next Querier in the pipeline.
func (f TraverseDownloadJob) Intercept(next generated.Querier) generated.Querier {
	return next
}

// Traverse calls f(ctx, q).
func (f TraverseDownloadJob) Traverse(ctx context.Context, q generated.Query) error {
	if q, ok := q.(*generated.DownloadJobQuery); ok {
		return f(ctx, q)
	}
	return fmt.Errorf("unexpected query type %T. expect *generated.DownloadJobQuery", q)
}

// The EventFunc type is an adapter to allow the use of ordinary function as a Querier.
type EventFunc func(context.Context, *generated.EventQuery) (generated.Value, error)

// Query calls f(ctx, q).
func (f EventFunc) Query(ctx context.Context, q generated.Query) (generated.Value, error) {
	if q, ok := q.(*generated.EventQuery); ok {
		return f(ctx, q)
	}
	return nil, fmt.Errorf("unexpected query type %T. expect *generated.EventQuery", q)
}

// The TraverseEvent type is an adapter to allow the use of ordinary function as Traverser.
type TraverseEvent func(context.Context, *generated.EventQuery) error

// Intercept is a dummy implementation of Intercept that returns the next Querier in the pipeline.
func (f TraverseEvent) Intercept(next generated.Querier) generated.Querier {
	return next
}

// Traverse calls f(ctx, q).
func (f TraverseEvent) Traverse(ctx context.Context, q generated.Query) error {
	if q, ok := q.(*generated.EventQuery); ok {
		return f(ctx, q)
	}
	return fmt.Errorf("unexpected query type %T. expect *generated.EventQuery", q)
}

// The MoveJobFunc type is an adapter to allow the use of ordinary function as a Querier.
type MoveJobFunc func(context.Context, *generated.MoveJobQuery) (generated.Value, error)

// Query calls f(ctx, q).
func (f MoveJobFunc) Query(ctx context.Context, q generated.Query) (generated.Value, error) {
	if q, ok := q.(*generated.MoveJobQuery); ok {
		return f(ctx, q)
	}
	return nil, fmt.Errorf("unexpected query type %T. expect *generated.MoveJobQuery", q)
}

// The TraverseMoveJob type is an adapter to allow the use of ordinary function as Traverser.
type TraverseMoveJob func(context.Context, *generated.MoveJobQuery) error

// Intercept is a dummy implementation of Intercept that returns the next Querier in the pipeline.
func (f TraverseMoveJob) Intercept(next generated.Querier) generated.Querier {
	return next
}

// Traverse calls f(ctx, q).
func (f TraverseMoveJob) Traverse(ctx context.Context, q generated.Query) error {
	if q, ok := q.(*generated.MoveJobQuery); ok {
		return f(ctx, q)
	}
	return fmt.Errorf("unexpected query type %T. expect *generated.MoveJobQuery", q)
}

// The SyncFileFunc type is an adapter to allow the use of ordinary function as a Querier.
type SyncFileFunc func(context.Context, *generated.SyncFileQuery) (generated.Value, error)

// Query calls f(ctx, q).
func (f SyncFileFunc) Query(ctx context.Context, q generated.Query) (generated.Value, error) {
	if q, ok := q.(*generated.SyncFileQuery); ok {
		return f(ctx, q)
	}
	return nil, fmt.Errorf("unexpected query type %T. expect *generated.SyncFileQuery", q)
}

// The TraverseSyncFile type is an adapter to allow the use of ordinary function as Traverser.
type TraverseSyncFile func(context.Context, *generated.SyncFileQuery) error

// Intercept is a dummy implementation of Intercept that returns the next Querier in the pipeline.
func (f TraverseSyncFile) Intercept(next generated.Querier) generated.Querier {
	return next
}

// Traverse calls f(ctx, q).
func (f TraverseSyncFile) Traverse(ctx context.Context, q generated.Query) error {
	if q, ok := q.(*generated.SyncFileQuery); ok {
		return f(ctx, q)
	}
	return fmt.Errorf("unexpected query type %T. expect *generated.SyncFileQuery", q)
}

// The SyncJobFunc type is an adapter to allow the use of ordinary function as a Querier.
type SyncJobFunc func(context.Context, *generated.SyncJobQuery) (generated.Value, error)

// Query calls f(ctx, q).
func (f SyncJobFunc) Query(ctx context.Context, q generated.Query) (generated.Value, error) {
	if q, ok := q.(*generated.SyncJobQuery); ok {
		return f(ctx, q)
	}
	return nil, fmt.Errorf("unexpected query type %T. expect *generated.SyncJobQuery", q)
}

// The TraverseSyncJob type is an adapter to allow the use of ordinary function as Traverser.
type TraverseSyncJob func(context.Context, *generated.SyncJobQuery) error

// Intercept is a dummy implementation of Intercept that returns the next Querier in the pipeline.
func (f TraverseSyncJob) Intercept(next generated.Querier) generated.Querier {
	return next
}

// Traverse calls f(ctx, q).
func (f TraverseSyncJob) Traverse(ctx context.Context, q generated.Query) error {
	if q, ok := q.(*generated.SyncJobQuery); ok {
		return f(ctx, q)
	}
	return fmt.Errorf("unexpected query type %T. expect *generated.SyncJobQuery", q)
}

// The TrackedDownloadFunc type is an adapter to allow the use of ordinary function as a Querier.
type TrackedDownloadFunc func(context.Context, *generated.TrackedDownloadQuery) (generated.Value, error)

// Query calls f(ctx, q).
func (f TrackedDownloadFunc) Query(ctx context.Context, q generated.Query) (generated.Value, error) {
	if q, ok := q.(*generated.TrackedDownloadQuery); ok {
		return f(ctx, q)
	}
	return nil, fmt.Errorf("unexpected query type %T. expect *generated.TrackedDownloadQuery", q)
}

// The TraverseTrackedDownload type is an adapter to allow the use of ordinary function as Traverser.
type TraverseTrackedDownload func(context.Context, *generated.TrackedDownloadQuery) error

// Intercept is a dummy implementation of Intercept that returns the next Querier in the pipeline.
func (f TraverseTrackedDownload) Intercept(next generated.Querier) generated.Querier {
	return next
}

// Traverse calls f(ctx, q).
func (f TraverseTrackedDownload) Traverse(ctx context.Context, q generated.Query) error {
	if q, ok := q.(*generated.TrackedDownloadQuery); ok {
		return f(ctx, q)
	}
	return fmt.Errorf("unexpected query type %T. expect *generated.TrackedDownloadQuery", q)
}

// NewQuery returns the generic Query interface for the given typed query.
func NewQuery(q generated.Query) (Query, error) {
	switch q := q.(type) {
	case *generated.AppQuery:
		return &query[*generated.AppQuery, predicate.App, app.OrderOption]{typ: generated.TypeApp, tq: q}, nil
	case *generated.AppJobQuery:
		return &query[*generated.AppJobQuery, predicate.AppJob, appjob.OrderOption]{typ: generated.TypeAppJob, tq: q}, nil
	case *generated.DownloadClientQuery:
		return &query[*generated.DownloadClientQuery, predicate.DownloadClient, downloadclient.OrderOption]{typ: generated.TypeDownloadClient, tq: q}, nil
	case *generated.DownloadFileQuery:
		return &query[*generated.DownloadFileQuery, predicate.DownloadFile, downloadfile.OrderOption]{typ: generated.TypeDownloadFile, tq: q}, nil
	case *generated.DownloadJobQuery:
		return &query[*generated.DownloadJobQuery, predicate.DownloadJob, downloadjob.OrderOption]{typ: generated.TypeDownloadJob, tq: q}, nil
	case *generated.EventQuery:
		return &query[*generated.EventQuery, predicate.Event, event.OrderOption]{typ: generated.TypeEvent, tq: q}, nil
	case *generated.MoveJobQuery:
		return &query[*generated.MoveJobQuery, predicate.MoveJob, movejob.OrderOption]{typ: generated.TypeMoveJob, tq: q}, nil
	case *generated.SyncFileQuery:
		return &query[*generated.SyncFileQuery, predicate.SyncFile, syncfile.OrderOption]{typ: generated.TypeSyncFile, tq: q}, nil
	case *generated.SyncJobQuery:
		return &query[*generated.SyncJobQuery, predicate.SyncJob, syncjob.OrderOption]{typ: generated.TypeSyncJob, tq: q}, nil
	case *generated.TrackedDownloadQuery:
		return &query[*generated.TrackedDownloadQuery, predicate.TrackedDownload, trackeddownload.OrderOption]{typ: generated.TypeTrackedDownload, tq: q}, nil
	default:
		return nil, fmt.Errorf("unknown query type %T", q)
	}
}

type query[T any, P ~func(*sql.Selector), R ~func(*sql.Selector)] struct {
	typ string
	tq  interface {
		Limit(int) T
		Offset(int) T
		Unique(bool) T
		Order(...R) T
		Where(...P) T
	}
}

func (q query[T, P, R]) Type() string {
	return q.typ
}

func (q query[T, P, R]) Limit(limit int) {
	q.tq.Limit(limit)
}

func (q query[T, P, R]) Offset(offset int) {
	q.tq.Offset(offset)
}

func (q query[T, P, R]) Unique(unique bool) {
	q.tq.Unique(unique)
}

func (q query[T, P, R]) Order(orders ...func(*sql.Selector)) {
	rs := make([]R, len(orders))
	for i := range orders {
		rs[i] = orders[i]
	}
	q.tq.Order(rs...)
}

func (q query[T, P, R]) WhereP(ps ...func(*sql.Selector)) {
	p := make([]P, len(ps))
	for i := range ps {
		p[i] = ps[i]
	}
	q.tq.Where(p...)
}
